"use strict";
/*

  Before using this class, make sure you have read Spotify Developer Terms of Use
  https://goo.gl/bKpZOx

  This class was created for experiments, not for actual use

 */

var Spotify = require('spotify-web');
var Playable = require("../Logic/Playable.js");

class SpotifyAudio extends Playable {

    constructor(uri, spotify, user) {
        super(user);
        this.uri = uri;
        this.spotify = spotify;
        this.title = uri;
    }

    getTitle() {
        return this.title;
    }

    createStream() {
        return new Promise(function(resolve, reject) {
            this.spotify.get(this.uri, function(err, track) {
                if(err != null) {
                    reject(err);
                    return;
                }
                this.title = track.artist[0].name + " - " + track.name;
                this.emit('data-changed');

                resolve(track.play());
            });
        }.bind(this));
    }

}